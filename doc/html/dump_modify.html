<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dump_modify command &mdash; LAMMPS documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/lammps.css" type="text/css" />
    <link rel="shortcut icon" href="_static/lammps.ico"/>
    <link rel="canonical" href="https://docs.lammps.org/dump_modify.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=f5d268a4"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
        <script async="async" src="_static/mathjax/es5/tex-mml-chtml.js?v=cadf963e"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="dump molfile command" href="dump_molfile.html" />
    <link rel="prev" title="dump image command" href="dump_image.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="Manual.html">
            
              <img src="_static/lammps-logo.png" class="logo" alt="Logo"/>
          </a>
            <div class="lammps_version">Version: <b>2 Aug 2023</b></div>
            <div class="lammps_release">git info: 2Aug2023</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">2. Install LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Build.html">3. Build LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Run_head.html">4. Run LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">5. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Packages.html">6. Optional packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Speed.html">7. Accelerate performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Howto.html">8. Howto discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">9. Example scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools.html">10. Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Errors.html">11. Errors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programmer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Library.html">1. LAMMPS Library Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python_head.html">2. Use Python with LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modify.html">3. Modifying &amp; extending LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Developer.html">4. Information for Developers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Command Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="commands_list.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixes.html">Fixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="computes.html">Computes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairs.html">Pair Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonds.html">Bond Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="angles.html">Angle Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dihedrals.html">Dihedral Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="impropers.html">Improper Styles</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dumps.html">Dump Styles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dump.html">dump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-vtk-command"><span class="xref std std-doc">dump vtk</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-h5md-command"><span class="xref std std-doc">dump h5md</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-molfile-command"><span class="xref std std-doc">dump molfile</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-netcdf-command"><span class="xref std std-doc">dump netcdf</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-image-command"><span class="xref std std-doc">dump image</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-movie-command"><span class="xref std std-doc">dump movie</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-atom-adios-command"><span class="xref std std-doc">dump atom/adios</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-custom-adios-command"><span class="xref std std-doc">dump custom/adios</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html#dump-cfg-uef-command"><span class="xref std std-doc">dump cfg/uef</span> command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_adios.html">dump atom/adios  command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_adios.html#dump-custom-adios-command">dump custom/adios command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_cfg_uef.html">dump cfg/uef command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_h5md.html">dump h5md command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html">dump image command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html#dump-movie-command">dump movie command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html#dump-modify-options-for-dump-image-movie">dump_modify options for dump image/movie</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">dump_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dump-modify-command-for-image-movie-options"><span class="xref std std-doc">dump_modify</span> command for image/movie options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restrictions">Restrictions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#related-commands">Related commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#default">Default</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dump_molfile.html">dump molfile command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_netcdf.html">dump netcdf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_netcdf.html#dump-netcdf-mpiio-command">dump netcdf/mpiio command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_vtk.html">dump vtk command</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fix_modify_atc_commands.html">fix_modify AtC commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Bibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="Manual.html">LAMMPS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="Manual.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="commands_list.html">Commands</a></li>
      <li class="breadcrumb-item active">dump_modify command</li>
      <li class="wy-breadcrumbs-aside">
          <a href="https://www.lammps.org"><img src="_static/lammps-logo.png" width="64" height="16" alt="LAMMPS Homepage"></a> | <a href="Commands_all.html">Commands</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="dump_image.html" class="btn btn-neutral float-left" title="dump image command" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dump_molfile.html" class="btn btn-neutral float-right" title="dump molfile command" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><span class="math notranslate nohighlight">\(\renewcommand{\AA}{\text{Å}}\)</span></p>
<section id="dump-modify-command">
<span id="index-0"></span><h1>dump_modify command<a class="headerlink" href="#dump-modify-command" title="Permalink to this heading"></a></h1>
</section>
<section id="dump-modify-command-for-image-movie-options">
<h1><a class="reference internal" href="dump_image.html"><span class="doc">dump_modify</span></a> command for image/movie options<a class="headerlink" href="#dump-modify-command-for-image-movie-options" title="Permalink to this heading"></a></h1>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading"></a></h2>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">dump_modify </span><span class="nv nv-Identifier">dump-ID</span><span class="w"> </span><span class="n">keyword</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">...</span>
</pre></div>
</div>
<ul>
<li><p>dump-ID = ID of dump to modify</p></li>
<li><p>one or more keyword/value pairs may be appended</p></li>
<li><p>these keywords apply to various dump styles</p></li>
<li><p>keyword = <em>append</em> or <em>at</em> or <em>balance</em> or <em>buffer</em> or <em>colname</em> or <em>delay</em> or <em>element</em> or <em>every</em> or <em>every/time</em> or <em>fileper</em> or <em>first</em> or <em>flush</em> or <em>format</em> or <em>header</em> or <em>image</em> or <em>label</em> or <em>maxfiles</em> or <em>nfile</em> or <em>pad</em> or <em>pbc</em> or <em>precision</em> or <em>region</em> or <em>refresh</em> or <em>scale</em> or <em>sfactor</em> or <em>skip</em> or <em>sort</em> or <em>tfactor</em> or <em>thermo</em> or <em>thresh</em> or <em>time</em> or <em>units</em> or <em>unwrap</em></p>
<pre class="literal-block"><em>append</em> arg = <em>yes</em> or <em>no</em>
<em>at</em> arg = N
  N = index of frame written upon first dump
<em>balance</em> arg = <em>yes</em> or <em>no</em>
<em>buffer</em> arg = <em>yes</em> or <em>no</em>
<em>colname</em> values =  ID string, or <em>default</em>
  string = new column header name
  ID = integer from 1 to N, or integer from -1 to -N, where N = # of quantities being output
       <em>or</em> a custom dump keyword or reference to compute, fix, property or variable.
<em>delay</em> arg = Dstep
  Dstep = delay output until this timestep
<em>element</em> args = E1 E2 ... EN, where N = # of atom types
  E1,...,EN = element name (e.g., C or Fe or Ga)
<em>every</em> arg = N
  N = dump on timesteps which are a multiple of N
  N can be a variable (see below)
<em>every/time</em> arg = Delta
  Delta = dump once every Delta interval of simulation time (time units)
  Delta can be a variable (see below)
<em>fileper</em> arg = Np
  Np = write one file for every this many processors
<em>first</em> arg = <em>yes</em> or <em>no</em>
<em>flush</em> arg = <em>yes</em> or <em>no</em>
<em>format</em> args = <em>line</em> string, <em>int</em> string, <em>float</em> string, ID string, or <em>none</em>
  string = C-style format string
  ID = integer from 1 to N, or integer from -1 to -N, where N = # of quantities being output
       <em>or</em> a custom dump keyword or reference to compute, fix, property or variable.
<em>header</em> arg = <em>yes</em> or <em>no</em>
  <em>yes</em> to write the header
  <em>no</em> to not write the header
<em>image</em> arg = <em>yes</em> or <em>no</em>
<em>label</em> arg = string
  string = character string (e.g., BONDS) to use in header of dump local file
<em>maxfiles</em> arg = Fmax
  Fmax = keep only the most recent <em>Fmax</em> snapshots (one snapshot per file)
<em>nfile</em> arg = Nf
  Nf = write this many files, one from each of Nf processors
<em>pad</em> arg = Nchar = # of characters to convert timestep to
<em>pbc</em> arg = <em>yes</em> or <em>no</em> = remap atoms via periodic boundary conditions
<em>precision</em> arg = power-of-10 value from 10 to 1000000
<em>region</em> arg = region-ID or &quot;none&quot;
<em>refresh</em> arg = c_ID = compute ID that supports a refresh operation
<em>scale</em> arg = <em>yes</em> or <em>no</em>
<em>sfactor</em> arg = coordinate scaling factor (&gt; 0.0)
<em>skip</em> arg = v_name
  v_name = variable with name which evaluates to non-zero (skip) or 0
<em>sort</em> arg = <em>off</em> or <em>id</em> or N or -N
   off = no sorting of per-atom lines within a snapshot
   id = sort per-atom lines by atom ID
   N = sort per-atom lines in ascending order by the Nth column
   -N = sort per-atom lines in descending order by the Nth column
<em>tfactor</em> arg = time scaling factor (&gt; 0.0)
<em>thermo</em> arg = <em>yes</em> or <em>no</em>
<em>time</em> arg = <em>yes</em> or <em>no</em>
<em>thresh</em> args = attribute operator value
  attribute = same attributes (x,fy,etotal,sxx,etc) used by dump custom style
  operator = &quot;&lt;&quot; or &quot;&lt;=&quot; or &quot;&gt;&quot; or &quot;&gt;=&quot; or &quot;==&quot; or &quot;!=&quot; or &quot;|^&quot;
  value = numeric value to compare to, or LAST
  these 3 args can be replaced by the word &quot;none&quot; to turn off thresholding
<em>units</em> arg = <em>yes</em> or <em>no</em>
<em>unwrap</em> arg = <em>yes</em> or <em>no</em></pre>
</li>
<li><p>these keywords apply only to the <em>image</em> and <em>movie</em> <a class="reference internal" href="dump_image.html"><span class="doc">styles</span></a></p></li>
<li><p>keyword = <em>acolor</em> or <em>adiam</em> or <em>amap</em> or <em>backcolor</em> or <em>bcolor</em> or <em>bdiam</em> or <em>boxcolor</em> or <em>color</em> or <em>bitrate</em> or <em>framerate</em></p>
<pre class="literal-block">see the <a class="reference internal" href="dump_image.html"><span class="doc">dump image</span></a> doc page for details</pre>
</li>
<li><p>these keywords apply only to the <em>/gz</em> and <em>/zstd</em> dump styles</p></li>
<li><p>keyword = <em>compression_level</em></p>
<pre class="literal-block"><em>compression_level</em> args = level
  level = integer specifying the compression level that should be used (see below for supported levels)</pre>
</li>
<li><p>these keywords apply only to the <em>/zstd</em> dump styles</p></li>
<li><p>keyword = <em>checksum</em></p>
<pre class="literal-block"><em>checksum</em> args = <em>yes</em> or <em>no</em> (add checksum at end of zst file)</pre>
</li>
</ul>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">dump_modify </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="s">&quot;%d %d %20.15g %g %g&quot;</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="n">yes</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="o">%</span><span class="m">20.15</span><span class="n">g</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="n">yes</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">myDump</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">yes</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">flush</span><span class="w"> </span><span class="n">yes</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="k">region </span><span class="nv nv-Identifier">mySphere</span><span class="w"> </span><span class="n">thresh</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.0</span><span class="w"> </span><span class="n">thresh</span><span class="w"> </span><span class="n">fx</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">3.2</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">xtcdump</span><span class="w"> </span><span class="n">precision</span><span class="w"> </span><span class="m">10000</span><span class="w"> </span><span class="n">sfactor</span><span class="w"> </span><span class="m">0.1</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="n">nfile</span><span class="w"> </span><span class="m">20</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">v_myVar</span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading"></a></h2>
<p>Modify the parameters of a previously defined dump command.  Not all
parameters are relevant to all dump styles.</p>
<p>As explained on the <a class="reference internal" href="dump.html"><span class="doc">dump</span></a> doc page, the <em>atom/mpiio</em>,
<em>custom/mpiio</em>, and <em>xyz/mpiio</em> dump styles are identical in command
syntax and in the format of the dump files they create, to the
corresponding styles without “mpiio”, except the single dump file they
produce is written in parallel via the MPI-IO library.  Thus if a
dump_modify option below is valid for the <em>atom</em> style, it is also
valid for the <em>atom/mpiio</em> style, and similarly for the other styles
which allow for use of MPI-IO.</p>
<hr class="docutils" />
<p>Unless otherwise noted, the following keywords apply to all the
various dump styles, including the <a class="reference internal" href="dump_image.html"><span class="doc">dump image</span></a> and
<a class="reference internal" href="dump_image.html"><span class="doc">dump movie</span></a> styles.</p>
<hr class="docutils" />
<p>The <em>append</em> keyword applies to all dump styles except <em>cfg</em> and <em>xtc</em>
and <em>dcd</em>.  It also applies only to text output files, not to binary
or gzipped or image/movie files.  If specified as <em>yes</em>, then dump
snapshots are appended to the end of an existing dump file.  If
specified as <em>no</em>, then a new dump file will be created which will
overwrite an existing file with the same name.</p>
<hr class="docutils" />
<p>The <em>at</em> keyword only applies to the <em>netcdf</em> dump style.  It can only
be used if the <em>append yes</em> keyword is also used.  The <em>N</em> argument is
the index of which frame to append to.  A negative value can be
specified for <em>N</em>, which means a frame counted from the end of the
file.  The <em>at</em> keyword can only be used if the dump_modify command is
before the first command that causes dump snapshots to be output
(e.g., a <a class="reference internal" href="run.html"><span class="doc">run</span></a> or <a class="reference internal" href="minimize.html"><span class="doc">minimize</span></a> command).  Once the
dump file has been opened, this keyword has no further effect.</p>
<hr class="docutils" />
<p>The <em>buffer</em> keyword applies only to dump styles <em>atom</em>, <em>cfg</em>,
<em>custom</em>, <em>local</em>, and <em>xyz</em>.  It also applies only to text output
files, not to binary or gzipped files.  If specified as <em>yes</em>, which
is the default, then each processor writes its output into an internal
text buffer, which is then sent to the processor(s) which perform file
writes, and written by those processors(s) as one large chunk of text.
If specified as <em>no</em>, each processor sends its per-atom data in binary
format to the processor(s) which perform file wirtes, and those
processor(s) format and write it line by line into the output file.</p>
<p>The buffering mode is typically faster since each processor does the
relatively expensive task of formatting the output for its own atoms.
However it requires about twice the memory (per processor) for the
extra buffering.</p>
<hr class="docutils" />
<div class="versionadded">
<p><span class="versionmodified added">New in version 4May2022.</span></p>
</div>
<p>The <em>colname</em> keyword can be used to change the default header keyword
for dump styles: <em>atom</em>, <em>custom</em>, <em>cfg</em>, and <em>local</em> and their compressed,
ADIOS, and MPIIO variants.  The setting for <em>ID string</em> replaces the default
text with the provided string.  <em>ID</em> can be a positive integer when it
represents the column number counting from the left, a negative integer
when it represents the column number from the right (i.e. -1 is the last
column/keyword), or a custom dump keyword (or compute, fix, property, or
variable reference) and then it replaces the string for that specific
keyword. For <em>atom</em> dump styles only the keywords “id”, “type”, “x”,
“y”, “z”, “ix”, “iy”, “iz” can be accessed via string regardless of
whether scaled or unwrapped coordinates were enabled or disabled, and
it always assumes 8 columns for indexing regardless of whether image
flags are enabled or not.  For dump style <em>cfg</em> only changes to the
“auxiliary” keywords (6th or later keyword) will become visible.</p>
<p>The <em>colname</em> keyword can be used multiple times. If multiple <em>colname</em>
settings refer to the same keyword, the last setting has precedence.  A
setting of <em>default</em> clears all previous settings, reverting all values
to their default names. Using the <em>scale</em> or <em>image</em> keyword will also
reset all header keywords to their default values.</p>
<hr class="docutils" />
<p>The <em>delay</em> keyword applies to all dump styles.  No snapshots will be
output until the specified <em>Dstep</em> timestep or later.  Specifying
<em>Dstep</em> &lt; 0 is the same as turning off the delay setting.  This is a
way to turn off unwanted output early in a simulation, for example,
during an equilibration phase.</p>
<hr class="docutils" />
<p>The <em>element</em> keyword applies only to the dump <em>cfg</em>, <em>xyz</em>, and
<em>image</em> styles.  It associates element names (e.g., H, C, Fe) with
LAMMPS atom types.  See the list of element names at the bottom of
this page.</p>
<p>In the case of dump <em>cfg</em>, this allows the <a class="reference external" href="http://li.mit.edu/Archive/Graphics/A/">AtomEye</a>
visualization package to read the dump file and render atoms with the
appropriate size and color.</p>
<p>In the case of dump <em>image</em>, the output images will follow the same
<a class="reference external" href="http://li.mit.edu/Archive/Graphics/A/">AtomEye</a> convention.  An element name is specified for each
atom type (1 to Ntype) in the simulation.  The same element name can
be given to multiple atom types.</p>
<p>In the case of <em>xyz</em> format dumps, there are no restrictions to what
label can be used as an element name.  Any white-space separated text
will be accepted.</p>
<hr class="docutils" />
<p>The <em>every</em> keyword can be used with any dump style except the <em>dcd</em>
and <em>xtc</em> styles.  It specifies that the output of dump snapshots will
now be performed on timesteps which are a multiple of a new <span class="math notranslate nohighlight">\(N\)</span>
value, This overrides the dump frequency originally specified by the
<a class="reference internal" href="dump.html"><span class="doc">dump</span></a> command.</p>
<p>The <em>every</em> keyword can be specified in one of two ways.  It can be a
numeric value in which case it must be &gt; 0.  Or it can be an
<a class="reference internal" href="variable.html"><span class="doc">equal-style variable</span></a>, which should be specified as
v_name, where name is the variable name.</p>
<p>In this case, the variable is evaluated at the beginning of a run to
determine the next timestep at which a dump snapshot will be written
out.  On that timestep the variable will be evaluated again to
determine the next timestep, etc.  Thus the variable should return
timestep values.  See the stagger() and logfreq() and stride() math
functions for <a class="reference internal" href="variable.html"><span class="doc">equal-style variables</span></a>, as examples of
useful functions to use in this context.  Other similar math functions
could easily be added as options for <a class="reference internal" href="variable.html"><span class="doc">equal-style variables</span></a>.  Also see the next() function, which allows use of a
file-style variable which reads successive values from a file, each
time the variable is evaluated.  Used with the <em>every</em> keyword, if the
file contains a list of ascending timesteps, you can output snapshots
whenever you wish.</p>
<p>Note that when using the variable option with the <em>every</em> keyword, you
need to use the <em>first</em> option if you want an initial snapshot written
to the dump file.  The <em>every</em> keyword cannot be used with the dump
<em>dcd</em> style.</p>
<p>For example, the following commands will
write snapshots at timesteps 0,10,20,30,100,200,300,1000,2000,etc:</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">variable        </span><span class="nv nv-Identifier">s</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">logfreq</span><span class="nv">(10,3,10)</span>
<span class="k">dump            </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">atom</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="n">tmp.dump</span>
<span class="k">dump_modify     </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">v_s</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">yes</span>
</pre></div>
</div>
<p>The following commands would write snapshots at the timesteps listed
in file tmp.times:</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">variable        </span><span class="nv nv-Identifier">f</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">tmp.times</span>
<span class="k">variable        </span><span class="nv nv-Identifier">s</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">next</span><span class="nv">(f)</span>
<span class="k">dump            </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">atom</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="n">tmp.dump</span>
<span class="k">dump_modify     </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">v_s</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using a file-style variable with the <em>every</em> keyword, the
file of timesteps must list a first timestep that is beyond the
current timestep (e.g., it cannot be 0).  And it must list one or more
timesteps beyond the length of the run you perform.  This is because
the dump command will generate an error if the next timestep it reads
from the file is not a value greater than the current timestep.  Thus
if you wanted output on steps 0,15,100 of a 100-timestep run, the file
should contain the values 15,100,101 and you should also use the
dump_modify first command.  Any final value &gt; 100 could be used in
place of 101.</p>
</div>
<hr class="docutils" />
<div class="versionadded">
<p><span class="versionmodified added">New in version 7Jan2022.</span></p>
</div>
<p>The <em>every/time</em> keyword can be used with any dump style except the
<em>dcd</em> and <em>xtc</em> styles.  It changes the frequency of dump snapshots
from being based on the current timestep to being determined by
elapsed simulation time, i.e. in time units of the <a class="reference internal" href="units.html"><span class="doc">units</span></a> command, and specifies <em>Delta</em> for the interval between
snapshots.  This can be useful when the timestep size varies during a
simulation run, e.g. by use of the <a class="reference internal" href="fix_dt_reset.html"><span class="doc">fix dt/reset</span></a>
command.  The default is to perform output on timesteps which a
multiples of specified timestep value <span class="math notranslate nohighlight">\(N\)</span>; see the <em>every</em>
keyword.</p>
<p>The <em>every/time</em> keyword can be used with any dump style except the
<em>dcd</em> and <em>xtc</em> styles.  It does two things.  It specifies that the
interval between dump snapshots will be set in simulation time
(i.e. in time units of the <a class="reference internal" href="units.html"><span class="doc">units</span></a> command).  This can be
useful when the timestep size varies during a simulation run (e.g., by
use of the <a class="reference internal" href="fix_dt_reset.html"><span class="doc">fix dt/reset</span></a> command).  The default is
to specify the interval in timesteps; see the <em>every</em> keyword.  The
<em>every/time</em> command also sets the interval value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you wish dump styles <em>atom</em>, <em>custom</em>, <em>local</em>, or <em>xyz</em> to
include the simulation time as a field in the header portion of
each snapshot, you also need to use the dump_modify <em>time</em> keyword
with a setting of <em>yes</em>.  See its documentation below.</p>
</div>
<p>Note that since snapshots are output on simulation steps, each
snapshot will be written on the first timestep whose associated
simulation time is &gt;= the exact snapshot time value.</p>
<p>As with the <em>every</em> option, the <em>Delta</em> value can be specified in one
of two ways.  It can be a numeric value in which case it must be &gt;
0.0.  Or it can be an <a class="reference internal" href="variable.html"><span class="doc">equal-style variable</span></a>, which
should be specified as v_name, where name is the variable name.</p>
<p>In this case, the variable is evaluated at the beginning of a run to
determine the next simulation time at which a dump snapshot will be
written out.  On that timestep the variable will be evaluated again to
determine the next simulation time, etc.  Thus the variable should
return values in time units.  Note the current timestep or simulation
time can be used in an <a class="reference internal" href="variable.html"><span class="doc">equal-style variables</span></a> since
they are both thermodynamic keywords.  Also see the next() function,
which allows use of a file-style variable which reads successive
values from a file, each time the variable is evaluated.  Used with
the <em>every/time</em> keyword, if the file contains a list of ascending
simulation times, you can output snapshots whenever you wish.</p>
<p>Note that when using the variable option with the <em>every/time</em>
keyword, you need to use the <em>first</em> option if you want an initial
snapshot written to the dump file.  The <em>every/time</em> keyword cannot be
used with the dump <em>dcd</em> style.</p>
<p>For example, the following commands will write snapshots at successive
simulation times which grow by a factor of 1.5 with each interval.
The dt value used in the variable is to avoid a zero result when the
initial simulation time is 0.0.</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">variable        </span><span class="nv nv-Identifier">increase</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="m">1.5</span><span class="o">*</span><span class="nv">(time+dt)</span>
<span class="k">dump            </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">atom</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="n">tmp.dump</span>
<span class="k">dump_modify     </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">every</span><span class="o">/</span><span class="n">time</span><span class="w"> </span><span class="n">v_increase</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">yes</span>
</pre></div>
</div>
<p>The following commands would write snapshots at the times listed in
file tmp.times:</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">variable        </span><span class="nv nv-Identifier">f</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">tmp.times</span>
<span class="k">variable        </span><span class="nv nv-Identifier">s</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">next</span><span class="nv">(f)</span>
<span class="k">dump            </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">atom</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="n">tmp.dump</span>
<span class="k">dump_modify     </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">every</span><span class="o">/</span><span class="n">time</span><span class="w"> </span><span class="n">v_s</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using a file-style variable with the <em>every/time</em> keyword, the
file of timesteps must list a first time that is beyond the time
associated with the current timestep (e.g., it cannot be 0.0).  And
it must list one or more times beyond the length of the run you
perform.  This is because the dump command will generate an error
if the next time it reads from the file is not a value greater than
the current time.  Thus if you wanted output at times 0,15,100 of a
run of length 100 in simulation time, the file should contain the
values 15,100,101 and you should also use the dump_modify first
command.  Any final value &gt; 100 could be used in place of 101.</p>
</div>
<hr class="docutils" />
<p>The <em>first</em> keyword determines whether a dump snapshot is written on
the very first timestep after the dump command is invoked.  This will
always occur if the current timestep is a multiple of $N$, the
frequency specified in the <a class="reference internal" href="dump.html"><span class="doc">dump</span></a> command or
<a class="reference internal" href="#"><span class="doc">dump_modify every</span></a> command, including timestep 0.
It will also always occur if the current simulation time is a multiple
of <em>Delta</em>, the time interval specified in the <a class="reference internal" href="#"><span class="doc">dump_modify
every/time</span></a> command.</p>
<p>But if this is not the case, a dump snapshot will only be written if
the setting of this keyword is <em>yes</em>.  If it is <em>no</em>, which is the
default, then it will not be written.</p>
<p>Note that if the argument to the <a class="reference internal" href="#"><span class="doc">dump_modify every</span></a> <a class="reference internal" href="#"><span class="doc">dump_modify every/time</span></a> commands is
a variable and not a numeric value, then specifying <em>first yes</em> is the
only way to write a dump snapshot on the first timestep after the dump
command is invoked.</p>
<hr class="docutils" />
<p>The <em>flush</em> keyword determines whether a flush operation is invoked
after a dump snapshot is written to the dump file.  A flush ensures
the output in that file is current (no buffering by the OS), even if
LAMMPS halts before the simulation completes.  Flushes cannot be
performed with dump style <em>xtc</em>.</p>
<hr class="docutils" />
<p>The <em>format</em> keyword can be used to change the default numeric format output
by the text-based dump styles: <em>atom</em>, <em>local</em>, <em>custom</em>, <em>cfg</em>, and
<em>xyz</em> styles, and their MPIIO variants. Only the <em>line</em> or <em>none</em>
options can be used with the <em>atom</em> and <em>xyz</em> styles.</p>
<p>All the specified format strings are C-style formats, such as used by
the C/C++ printf() command.  The <em>line</em> keyword takes a single
argument which is the format string for an entire line of output for
each atom (do not include a trailing “n”), with <span class="math notranslate nohighlight">\(N\)</span> fields, which you
must enclose in quotes if there is more than one field.  The <em>int</em> and
<em>float</em> keywords take a single format argument and are applied to all
integer or floating-point quantities output.  The setting for <em>M string</em>
also takes a single format argument which is used for the <span class="math notranslate nohighlight">\(M\)</span>th
value output in each line (e.g., the fifth column is output in high
precision by “format 5 %20.15g”).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using the <em>line</em> keyword for the <em>cfg</em> style, the first two
fields (atom ID and type) are not actually written into the CFG file,
however you must include formats for them in the format string.</p>
</div>
<p>The <em>format</em> keyword can be used multiple times.  The precedence is
that for each value in a line of output, the <em>M</em> format (if specified)
is used, else the <em>int</em> or <em>float</em> setting (if specified) is used,
else the <em>line</em> setting (if specified) for that value is used, else
the default setting is used.  A setting of <em>none</em> clears all previous
settings, reverting all values to their default format.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Atom and molecule IDs are stored internally as 4-byte or 8-byte
signed integers, depending on how LAMMPS was compiled.  When
specifying the <em>format int</em> option you can use a “%d”-style format
identifier in the format string and LAMMPS will convert this to the
corresponding 8-byte form if it is needed when outputting those
values.  However, when specifying the <em>line</em> option or <em>format M
string</em> option for those values, you should specify a format string
appropriate for an 8-byte signed integer (e.g., one with “%ld”) if
LAMMPS was compiled with the -DLAMMPS_BIGBIG option for 8-byte IDs.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any value written to a text-based dump file that is a per-atom
quantity calculated by a <a class="reference internal" href="compute.html"><span class="doc">compute</span></a> or <a class="reference internal" href="fix.html"><span class="doc">fix</span></a> is
stored internally as a floating-point value.  If the value is actually
an integer and you wish it to appear in the text dump file as a
(large) integer, then you need to use an appropriate format.  For
example, these commands:</p>
</div>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">compute     </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">property</span><span class="o">/</span><span class="n">local</span><span class="w"> </span><span class="n">batom1</span><span class="w"> </span><span class="n">batom2</span>
<span class="k">dump        </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="n">tmp.bonds</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">c_1[1]</span><span class="w"> </span><span class="n">c_1[2]</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="s">&quot;%d %0.0f %0.0f&quot;</span>
</pre></div>
</div>
<p>will output the two atom IDs for atoms in each bond as integers.  If
the dump_modify command were omitted, they would appear as
floating-point values, assuming they were large integers (more than six
digits).  The “index” keyword should use the “%d” format since it is
not generated by a compute or fix, and is stored internally as an
integer.</p>
<hr class="docutils" />
<p>The <em>fileper</em> keyword is documented below with the <em>nfile</em> keyword.</p>
<hr class="docutils" />
<p>The <em>header</em> keyword toggles whether the dump file will include a
header.  Excluding a header will reduce the size of the dump file for
data produced by <a class="reference internal" href="pair_tracker.html"><span class="doc">pair tracker</span></a> or
<a class="reference internal" href="Howto_bpm.html"><span class="doc">bpm bond styles</span></a> which may not require the
information typically written to the header.</p>
<hr class="docutils" />
<p>The <em>image</em> keyword applies only to the dump <em>atom</em> style.  If the
image value is <em>yes</em>, three flags are appended to each atom’s coords which
are the absolute box image of the atom in each dimension.  For
example, an <span class="math notranslate nohighlight">\(x\)</span> image flag of <span class="math notranslate nohighlight">\(-2\)</span> with a normalized coord of 0.5
means the atom is in the center of the box, but has passed through the box
boundary twice and is really two box lengths to the left of its
current coordinate.  Note that for dump style <em>custom</em> these various
values can be printed in the dump file by using the appropriate atom
attributes in the dump command itself.
Using this keyword will reset all custom header names set with
<em>dump_modify colname</em> to their respective default values.</p>
<hr class="docutils" />
<p>The <em>label</em> keyword applies only to the dump <em>local</em> style.
When it writes local information, such as bond or angle topology
to a dump file, it will use the specified <em>label</em> to format the header.
By default this includes two lines:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ITEM: NUMBER OF ENTRIES
ITEM: ENTRIES ...
</pre></div>
</div>
<p>The word “ENTRIES” will be replaced with the string specified
(e.g., BONDS or ANGLES).</p>
<hr class="docutils" />
<p>The <em>maxfiles</em> keyword can only be used when a ‘*’ wildcard is
included in the dump file name (i.e., when writing a new file(s) for
each snapshot).  The specified <em>Fmax</em> is how many snapshots will be
kept.  Once this number is reached, the file(s) containing the oldest
snapshot is deleted before a new dump file is written.  If the
specified <span class="math notranslate nohighlight">\(\text{Fmax} \le 0\)</span>, then all files are retained.</p>
<p>This can be useful for debugging, especially if you do not know on what
timestep something bad will happen (e.g., when LAMMPS will exit with an
error).  You can dump every time step and limit the number of dump
files produced, even if you run for thousands of steps.</p>
<hr class="docutils" />
<p>The <em>nfile</em> or <em>fileper</em> keywords can be used in conjunction with the
“%” wildcard character in the specified dump file name, for all dump
styles except the <em>dcd</em>, <em>image</em>, <em>movie</em>, <em>xtc</em>, and <em>xyz</em> styles
(for which “%” is not allowed).  As explained on the <a class="reference internal" href="dump.html"><span class="doc">dump</span></a>
command doc page, the “%” character causes the dump file to be written
in pieces, one piece for each of <span class="math notranslate nohighlight">\(P\)</span> processors.  By default, <span class="math notranslate nohighlight">\(P\)</span>
is the number of processors the simulation is running on.  The <em>nfile</em> or
<em>fileper</em> keyword can be used to set <span class="math notranslate nohighlight">\(P\)</span> to a smaller value, which can
be more efficient when running on a large number of processors.</p>
<p>The <em>nfile</em> keyword sets <span class="math notranslate nohighlight">\(P\)</span> to the specified <span class="math notranslate nohighlight">\(N_f\)</span> value.
For example, if <span class="math notranslate nohighlight">\(N_f = 4\)</span>, and the simulation is running on 100
processors, four files will be written by processors 0, 25, 50, and 75.
Each will collect information from itself and the next 24 processors and write
it to a dump file.</p>
<p>For the <em>fileper</em> keyword, the specified value of <span class="math notranslate nohighlight">\(N_p\)</span> means write one
file for every <span class="math notranslate nohighlight">\(N_p\)</span> processors.  For example, if <span class="math notranslate nohighlight">\(N_p = 4\)</span>,
every fourth processor (0, 4, 8, 12, etc.) will collect information from itself
and the next three processors and write it to a dump file.</p>
<hr class="docutils" />
<p>The <em>pad</em> keyword only applies when the dump filename is specified
with a wildcard “*” character which becomes the timestep.  If <em>pad</em> is
0, which is the default, the timestep is converted into a string of
unpadded length (e.g., 100 or 12000 or 2000000).  When <em>pad</em> is
specified with <em>Nchar</em> <span class="math notranslate nohighlight">\(&gt;\)</span> 0, the string is padded with leading zeroes
so they are all the same length = <em>Nchar</em>.  For example, pad 7 would
yield 0000100, 0012000, 2000000.  This can be useful so that
post-processing programs can easily read the files in ascending
timestep order.</p>
<hr class="docutils" />
<p>The <em>pbc</em> keyword applies to all the dump styles.  As explained on the
<a class="reference internal" href="dump.html"><span class="doc">dump</span></a> doc page, atom coordinates in a dump file may be
slightly outside the simulation box.  This is because periodic
boundary conditions are enforced only on timesteps when neighbor lists
are rebuilt, which will not typically coincide with the timesteps dump
snapshots are written.  If the setting of this keyword is set to
<em>yes</em>, then all atoms will be remapped to the periodic box before the
snapshot is written, then restored to their original position.  If it
is set to <em>no</em> they will not be.  The <em>no</em> setting is the default
because it requires no extra computation.</p>
<hr class="docutils" />
<p>The <em>precision</em> keyword only applies to the dump <em>xtc</em> style.  A
specified value of <span class="math notranslate nohighlight">\(N\)</span> means that coordinates are stored to <span class="math notranslate nohighlight">\(1/N\)</span>
nanometer accuracy (e.g., for <span class="math notranslate nohighlight">\(N = 1000\)</span>, the coordinates are written to
<span class="math notranslate nohighlight">\(1/1000\)</span> nanometer accuracy).</p>
<hr class="docutils" />
<p>The <em>refresh</em> keyword only applies to the dump <em>custom</em>, <em>cfg</em>,
<em>image</em>, and <em>movie</em> styles.  It allows an “incremental” dump file to
be written, by refreshing a compute that is used as a threshold for
determining which atoms are included in a dump snapshot.  The
specified <em>c_ID</em> gives the ID of the compute.  It is prefixed by “c_”
to indicate a compute, which is the only current option.  At some
point, other options may be added (e.g., fixes or variables).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This keyword can only be specified once for a dump.  Refreshes
of multiple computes cannot yet be performed.</p>
</div>
<p>The definition and motivation of an incremental dump file is as
follows.  Instead of outputting all atoms at each snapshot (with some
associated values), you may only wish to output the subset of atoms
with a value that has changed in some way compared to the value the
last time that atom was output.  In some scenarios this can result in
a dramatically smaller dump file.  If desired, by post-processing the
sequence of snapshots, the values for all atoms at all timesteps can
be inferred.</p>
<p>A concrete example is a simulation of atom diffusion in a solid,
represented as atoms on a lattice.  Diffusive hops are rare.  Imagine
that when a hop occurs an atom moves more than a distance <em>Dhop</em>.  For
any snapshot we only want to output atoms that have hopped since the
last snapshot.  This can be accomplished with something the following
commands:</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">variable        </span><span class="nv nv-Identifier">Dhop</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="m">0.6</span>
<span class="k">variable        </span><span class="nv nv-Identifier">check</span><span class="w"> </span><span class="n">atom</span><span class="w"> </span><span class="s">&quot;c_dsp[4] &gt; v_Dhop&quot;</span>
<span class="k">compute         </span><span class="nv nv-Identifier">dsp</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">displace</span><span class="o">/</span><span class="n">atom</span><span class="w"> </span><span class="n">refresh</span><span class="w"> </span><span class="n">check</span>
<span class="k">dump            </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="nv nv-Identifier">all</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="n">tmp.dump</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span>
<span class="k">dump_modify     </span><span class="nv nv-Identifier">1</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">yes</span><span class="w"> </span><span class="n">thresh</span><span class="w"> </span><span class="n">c_dsp[4]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">${Dhop}</span><span class="w"> </span><span class="n">refresh</span><span class="w"> </span><span class="n">c_dsp</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="compute_displace_atom.html"><span class="doc">compute displace/atom</span></a> command
calculates the displacement of each atom from its reference position.
The “4” index is the scalar displacement; 1, 2, and 3 are the <span class="math notranslate nohighlight">\(xyz\)</span>
components of the displacement.  The <a class="reference internal" href="#"><span class="doc">dump_modify thresh</span></a>
command will cause only atoms that have displaced more than
<span class="math notranslate nohighlight">\(0.6~\AA\)</span> to be output on a given snapshot (assuming
metal units).  However, note that when an atom is output, we also need to
update the reference position for that atom to its new coordinates.  So that it
will not be output in every snapshot thereafter.  That reference position is
stored by <a class="reference internal" href="compute_displace_atom.html"><span class="doc">compute displace/atom</span></a>.  So the
dump_modify <em>refresh</em> option triggers a call to compute displace/atom at the
end of every dump to perform that update.  The <em>refresh check</em> option
shown as part of the <a class="reference internal" href="compute_displace_atom.html"><span class="doc">compute displace/atom</span></a>
command enables the compute to respond to the call from the dump command, and
update the appropriate reference positions.  This is done be defining an
<a class="reference internal" href="variable.html"><span class="doc">atom-style variable</span></a>, <em>check</em> in this example, which
calculates a Boolean value (0 or 1) for each atom, based on the same
criterion used by dump_modify thresh.</p>
<p>See the <a class="reference internal" href="compute_displace_atom.html"><span class="doc">compute displace/atom</span></a> command for
more details, including an example of how to produce output that
includes an initial snapshot with the reference position of all atoms.</p>
<p>Note that only computes with a <em>refresh</em> option will work with
dump_modify refresh.  See individual compute doc pages for details.
Currently, only compute displace/atom supports this option.  Others
may be added at some point.  If you use a compute that does not support
refresh operations, LAMMPS will not complain; dump_modify refresh will
simply do nothing.</p>
<hr class="docutils" />
<p>The <em>region</em> keyword only applies to the dump <em>custom</em>, <em>cfg</em>,
<em>image</em>, and <em>movie</em> styles.  If specified, only atoms in the region
will be written to the dump file or included in the image/movie.  Only
one region can be applied as a filter (the last one specified).  See
the <a class="reference internal" href="region.html"><span class="doc">region</span></a> command for more details.  Note that a region
can be defined as the “inside” or “outside” of a geometric shape, and
it can be the “union” or “intersection” of a series of simpler
regions.</p>
<hr class="docutils" />
<p>The <em>scale</em> keyword applies only to the dump <em>atom</em> style.  A scale
value of <em>yes</em> means atom coords are written in normalized units from
0.0 to 1.0 in each box dimension.  If the simulation box is triclinic
(tilted), then all atom coords will still be between 0.0 and 1.0.  A
value of <em>no</em> means they are written in absolute distance units
(e.g., <span class="math notranslate nohighlight">\(\AA\)</span> or <span class="math notranslate nohighlight">\(\sigma\)</span>).
Using this keyword will reset all custom header names set with
<em>dump_modify colname</em> to their respective default values.</p>
<hr class="docutils" />
<p>The <em>sfactor</em> and <em>tfactor</em> keywords only apply to the dump <em>xtc</em>
style.  They allow customization of the unit conversion factors used
when writing to XTC files.  By default, they are initialized for
whatever <a class="reference internal" href="units.html"><span class="doc">units</span></a> style is being used, to write out
coordinates in nanometers and time in picoseconds.  For example, for <em>real</em>
units, LAMMPS defines <em>sfactor</em> = 0.1 and <em>tfactor</em> = 0.001, since the
<span class="math notranslate nohighlight">\(\AA\)</span> and fs used by <em>real</em> units are 0.1 nm and
0.001 ps, respectively.  If you are using a units system with distance and time
units far from nm and ps, you may wish to write XTC files with
different units, since the compression algorithm used in XTC files is
most effective when the typical magnitude of position data is between
10.0 and 0.1.</p>
<hr class="docutils" />
<div class="versionadded">
<p><span class="versionmodified added">New in version 15Sep2022.</span></p>
</div>
<p>The <em>skip</em> keyword can be used with all dump styles.  It allows a dump
snapshot to be skipped (not written to the dump file), if a condition
is met.  The condition is computed by an <a class="reference internal" href="variable.html"><span class="doc">equal-style variable</span></a>, which should be specified as v_name, where name is the
variable name.  If the variable evaluation returns a non-zero value,
then the dump snapshot is skipped.  If it returns zero, the dump
proceeds as usual.  Note that <a class="reference internal" href="variable.html"><span class="doc">equal-style variable</span></a>
can contain Boolean operators which effectively evaluate as a true
(non-zero) or false (zero) result.</p>
<p>The <em>skip</em> keyword can be useful for debugging purposes, e.g. to dump
only on a particular timestep.  Or to limit output to conditions of
interest, e.g. only when the force on some atom exceeds a threshold
value.</p>
<hr class="docutils" />
<p>The <em>sort</em> keyword determines whether lines of per-atom output in a
snapshot are sorted or not.  A sort value of <em>off</em> means they will
typically be written in indeterminate order, either in serial or
parallel.  This is the case even in serial if the <a class="reference internal" href="atom_modify.html"><span class="doc">atom_modify sort</span></a> option is turned on, which it is by default, to improve
performance.  A sort value of <em>id</em> means sort the output by atom ID.  A
sort value of <span class="math notranslate nohighlight">\(N\)</span> or <span class="math notranslate nohighlight">\(-N\)</span> means sort the output by the value
in the <span class="math notranslate nohighlight">\(N\)</span>th column of per-atom info in either ascending or
descending order.</p>
<p>The dump <em>local</em> style cannot be sorted by atom ID, since there are
typically multiple lines of output per atom.  Some dump styles, such
as <em>dcd</em> and <em>xtc</em>, require sorting by atom ID to format the output
file correctly.  If multiple processors are writing the dump file, via
the “%” wildcard in the dump filename and the <em>nfile</em> or <em>fileper</em>
keywords are set to non-default values (i.e., the number of dump file
pieces is not equal to the number of procs), then sorting cannot be
performed.</p>
<p>In a parallel run, the per-processor dump file pieces can have
significant imbalance in number of lines of per-atom info. The <em>balance</em>
keyword determines whether the number of lines in each processor
snapshot are balanced to be nearly the same. A balance value of <em>no</em>
means no balancing will be done, while <em>yes</em> means balancing will be
performed. This balancing preserves dump sorting order. For a serial
run, this option is ignored since the output is already balanced.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless it is required by the dump style, sorting dump file
output requires extra overhead in terms of CPU and communication cost,
as well as memory, versus unsorted output.</p>
</div>
<hr class="docutils" />
<p>The <em>thermo</em> keyword only applies the dump styles <em>netcdf</em> and <em>yaml</em>.
It triggers writing of <a class="reference internal" href="thermo.html"><span class="doc">thermo</span></a> information to the dump
file alongside per-atom data.  The values included in the dump file are
cached values from the last thermo output and include the exact same the
values as specified by the <a class="reference internal" href="thermo_style.html"><span class="doc">thermo_style</span></a> command.
Because these are cached values, they are only up-to-date when dump
output is on a timestep that also has thermo output. Dump style <em>yaml</em>
will skip thermo output on incompatible steps.</p>
<hr class="docutils" />
<p>The <em>thresh</em> keyword only applies to the dump <em>custom</em>, <em>cfg</em>,
<em>image</em>, and <em>movie</em> styles.  Multiple thresholds can be specified.
Specifying <em>none</em> turns off all threshold criteria.  If thresholds are
specified, only atoms whose attributes meet all the threshold criteria
are written to the dump file or included in the image.  The possible
attributes that can be tested for are the same as those that can be
specified in the <a class="reference internal" href="dump.html"><span class="doc">dump custom</span></a> command, with the exception
of the <em>element</em> attribute, since it is not a numeric value.  Note
that a different attributes can be used than those output by the
<a class="reference internal" href="dump.html"><span class="doc">dump custom</span></a> command.  For example, you can output the
coordinates and stress of atoms whose energy is above some threshold.</p>
<p>If an atom-style variable is used as the attribute, then it can
produce continuous numeric values or effective Boolean 0/1 values,
which may be useful for the comparison operator.  Boolean values can
be generated by variable formulas that use comparison or Boolean math
operators or special functions like gmask() and rmask() and grmask().
See the <a class="reference internal" href="variable.html"><span class="doc">variable</span></a> command page for details.</p>
<p>The specified value must be a simple numeric value or the word LAST.
If LAST is used, it refers to the value of the attribute the last time
the dump command was invoked to produce a snapshot.  This is a way to
only dump atoms whose attribute has changed (or not changed).
Three examples follow.</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">dump_modify </span><span class="nv nv-Identifier">...</span><span class="w"> </span><span class="n">thresh</span><span class="w"> </span><span class="n">ix</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">LAST</span>
</pre></div>
</div>
<p>This will dump atoms which have crossed the periodic <span class="math notranslate nohighlight">\(x\)</span> boundary of the
simulation box since the last dump.  (Note that atoms that crossed
once and then crossed back between the two dump timesteps would not be
included.)</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">region </span><span class="nv nv-Identifier">foo</span><span class="w"> </span><span class="n">sphere</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span>
<span class="k">variable </span><span class="nv nv-Identifier">inregion</span><span class="w"> </span><span class="n">atom</span><span class="w"> </span><span class="n">rmask</span><span class="nv">(foo)</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">...</span><span class="w"> </span><span class="n">thresh</span><span class="w"> </span><span class="n">v_inregion</span><span class="w"> </span><span class="o">|^</span><span class="w"> </span><span class="n">LAST</span>
</pre></div>
</div>
<p>This will dump atoms which crossed the boundary of the spherical
region since the last dump.</p>
<div class="highlight-LAMMPS notranslate"><div class="highlight"><pre><span></span><span class="k">variable </span><span class="nv nv-Identifier">charge</span><span class="w"> </span><span class="n">atom</span><span class="w"> </span><span class="s">&quot;(q &gt; 0.5) || (q &lt; -0.5)&quot;</span>
<span class="k">dump_modify </span><span class="nv nv-Identifier">...</span><span class="w"> </span><span class="n">thresh</span><span class="w"> </span><span class="n">v_charge</span><span class="w"> </span><span class="o">|^</span><span class="w"> </span><span class="n">LAST</span>
</pre></div>
</div>
<p>This will dump atoms whose charge has changed from an absolute value
less than <span class="math notranslate nohighlight">\(\frac12\)</span> to greater than <span class="math notranslate nohighlight">\(\frac12\)</span> (or vice versa) since the last dump (e.g., due to reactions and subsequent charge equilibration in a
reactive force field).</p>
<p>The choice of operators listed above are the usual comparison
operators.  The XOR operation (exclusive or) is also included as “|^”.
In this context, XOR means that if either the attribute or value is
0.0 and the other is non-zero, then the result is “true” and the
threshold criterion is met.  Otherwise it is not met.</p>
<hr class="docutils" />
<p>The <em>time</em> keyword only applies to the dump <em>atom</em>, <em>custom</em>, <em>local</em>,
and <em>xyz</em> styles (and their COMPRESS package versions <em>atom/gz</em>,
<em>custom/gz</em> and <em>local/gz</em>).  For the first three styles, if set to
<em>yes</em>, each frame will will contain two extra lines before the “ITEM:
TIMESTEP” entry:</p>
<pre class="literal-block">ITEM: TIME
&lt;elapsed time&gt;</pre>
<p>For the <em>xyz</em> style, the simulation time is included on the same line
as the timestep value.</p>
<p>This will output the current elapsed simulation time in current
time units equivalent to the <a class="reference internal" href="thermo_style.html"><span class="doc">thermo keyword</span></a> <em>time</em>.
This is to simplify post-processing of trajectories using a variable time
step (e.g., when using <a class="reference internal" href="fix_dt_reset.html"><span class="doc">fix dt/reset</span></a>).
The default setting is <em>no</em>.</p>
<hr class="docutils" />
<p>The <em>units</em> keyword only applies to the dump <em>atom</em>, <em>custom</em>, and
<em>local</em> styles (and their COMPRESS package versions <em>atom/gz</em>,
<em>custom/gz</em> and <em>local/gz</em>). If set to <em>yes</em>, each individual dump
file will contain two extra lines at the very beginning with:</p>
<pre class="literal-block">ITEM: UNITS
&lt;units style&gt;</pre>
<p>This will output the current selected <a class="reference internal" href="units.html"><span class="doc">units</span></a> style
to the dump file and thus allows visualization and post-processing
tools to determine the choice of units of the data in the dump file.
The default setting is <em>no</em>.</p>
<hr class="docutils" />
<p>The <em>unwrap</em> keyword only applies to the dump <em>dcd</em> and <em>xtc</em> styles.
If set to <em>yes</em>, coordinates will be written “unwrapped” by the image
flags for each atom.  Unwrapped means that if the atom has passed through
a periodic boundary one or more times, the value is printed for what
the coordinate would be if it had not been wrapped back into the
periodic box.  Note that these coordinates may thus be far outside the
box size stored with the snapshot.</p>
<hr class="docutils" />
<p>The COMPRESS package offers both GZ and Zstd compression variants of
styles atom, custom, local, cfg, and xyz. When using these styles the
compression level can be controlled by the <code class="code docutils literal notranslate"><span class="pre">compression_level</span></code>
keyword. File names with these styles have to end in either
<code class="code docutils literal notranslate"><span class="pre">.gz</span></code> or <code class="code docutils literal notranslate"><span class="pre">.zst</span></code>.</p>
<p>GZ supports compression levels from <span class="math notranslate nohighlight">\(-1\)</span> (default), 0 (no compression),
and 1 to 9, 9 being the best compression. The COMPRESS <code class="code docutils literal notranslate"><span class="pre">/gz</span></code> styles use 9
as default compression level.</p>
<p>Zstd offers a wider range of compression levels, including negative
levels that sacrifice compression for performance. 0 is the default,
positive levels are 1 to 22, with 22 being the most expensive
compression. Zstd promises higher compression/decompression speeds for
similar compression ratios. For more details see
<cite>https://facebook.github.io/zstd/</cite>.</p>
<p>In addition, Zstd compressed files can include a checksum of the
entire contents. The Zstd enabled dump styles enable this feature by
default and it can be disabled with the <code class="code docutils literal notranslate"><span class="pre">checksum</span></code> keyword.</p>
</section>
<hr class="docutils" />
<section id="restrictions">
<h2>Restrictions<a class="headerlink" href="#restrictions" title="Permalink to this heading"></a></h2>
<p>Not all <em>dump_modify</em> options can be applied to all dump styles.
Details are in the discussions of the individual options.</p>
</section>
<section id="related-commands">
<h2>Related commands<a class="headerlink" href="#related-commands" title="Permalink to this heading"></a></h2>
<p><a class="reference internal" href="dump.html"><span class="doc">dump</span></a>, <a class="reference internal" href="dump_image.html"><span class="doc">dump image</span></a>, <a class="reference internal" href="undump.html"><span class="doc">undump</span></a></p>
</section>
<section id="default">
<h2>Default<a class="headerlink" href="#default" title="Permalink to this heading"></a></h2>
<p>The option defaults are</p>
<ul class="simple">
<li><p>append = no</p></li>
<li><p>balance = no</p></li>
<li><p>buffer = yes for dump styles <em>atom</em>, <em>custom</em>, <em>loca</em>, and <em>xyz</em></p></li>
<li><p>element = “C” for every atom type</p></li>
<li><p>every = whatever it was set to via the <a class="reference internal" href="dump.html"><span class="doc">dump</span></a> command</p></li>
<li><p>fileper = # of processors</p></li>
<li><p>first = no</p></li>
<li><p>flush = yes</p></li>
<li><p>format = %d and %g for each integer or floating point value</p></li>
<li><p>image = no</p></li>
<li><p>label = ENTRIES</p></li>
<li><p>maxfiles = -1</p></li>
<li><p>nfile = 1</p></li>
<li><p>pad = 0</p></li>
<li><p>pbc = no</p></li>
<li><p>precision = 1000</p></li>
<li><p>region = none</p></li>
<li><p>scale = yes</p></li>
<li><p>sort = off for dump styles <em>atom</em>, <em>custom</em>, <em>cfg</em>, and <em>local</em></p></li>
<li><p>sort = id for dump styles <em>dcd</em>, <em>xtc</em>, and <em>xyz</em></p></li>
<li><p>thresh = none</p></li>
<li><p>units = no</p></li>
<li><p>unwrap = no</p></li>
<li><p>compression_level = 9 (gz variants)</p></li>
<li><p>compression_level = 0 (zstd variants)</p></li>
<li><p>checksum = yes (zstd variants)</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dump_image.html" class="btn btn-neutral float-left" title="dump image command" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dump_molfile.html" class="btn btn-neutral float-right" title="dump molfile command" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2003-2023 Sandia Corporation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>